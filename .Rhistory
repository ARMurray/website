scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")
plot
ggplotly(p=plot, tooltip = c("text","People"))
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.5)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
library(ggplot2)
library(tidyr)
library(plotly)
library(scales)
attendance <- read.csv('/Users/Andrew/Documents/fair.csv')
colnames(attendance) <- c('Year','Thu','Fri','Sat','Sun','Mon','Tue','Wed','Thu2','Fri2','Sat2','Sun2','Total')
daily <- select(attendance,Year,Thu,Fri,Sat,Sun,Mon,Tue,Wed,Thu2,Fri2,Sat2,Sun2)
long_tbl <- gather(daily,Day, Attendance, -Year)%>%
arrange()
mid <- mean(long_tbl$Year)
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day", size=4)+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text=element_text(size=12))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.y=element_text(size=12))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.key.size = 20)
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.key = element_text(size=20))
theme(legend.text = element_text(size=20)
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=20))
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=20))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))
plot
?guide_legend
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
guide_legend(keyheight = 10)
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = 5)
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = "20 pixels")
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = 20,"pixels")
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.size = unit(2, "cm"))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.size = unit(2, "px"))
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.size = unit(2, "cm"))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = unit(2, "cm"))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = unit(2, "cm"))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.8)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=20))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = unit(2, "cm"))+
theme(axis.title = element_text(size = 20))
plot
plot <- ggplot(data = long_tbl, aes(text = Year, People = Attendance, x=factor(Day, c('Thu','Fri','Sat',
'Sun','Mon','Tue',
'Wed','Thu2','Fri2',
'Sat2','Sun2')),
y=Attendance, group=Year, color = Year))+
geom_line(size=.6)+
scale_color_gradient2(midpoint=mid, low="green", mid="blue", high="red", space ="Lab" )+
xlab("Day")+
scale_y_continuous(labels = comma)+
geom_point()+
ggtitle("North Carolina State Fair Attendance", subtitle = "1986 - 2017")+
theme(axis.text = element_text(size=16))+
theme(legend.text = element_text(size=16))+
theme(legend.title = element_text(size = 20))+
theme(legend.key.height = unit(2, "cm"))+
theme(axis.title = element_text(size = 20))
plot
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
setwd("~/Downloads")
library(sf)
library(ggplot2)
setwd("~/Downloads")
setwd("~/Downloads/Tab_Intersect")
table <- read.csv("Oklahoma/OK_shale.csv")
?read.csv
table <- read.csv("Oklahoma/OK_shale.csv", nrows = 10)
#First, lets import the well pad and the block data and then project them to
#a projection that's good for our working area.
pads <- st_as_sf(table, coords = c('Longitude','Latitude'), crs = 4269)
blocks <- st_read("Oklahoma/OK_blocks.shp")
#Project data
pads <- st_transform(pads,3158)
blocks <- st_transform(blocks, 3158)
#Create buffers around the well pads of 1,000 km
buf <- st_buffer(pads, 1000)
outdf <- data.frame()
print(Sys.time())
for (r in 1:nrow(pads)){
row <- pads[r,]
buffer <- st_buffer(row, 1000)
intersects <- st_intersection(blocks,buffer)
intersects$NewArea <- st_area(intersects)
new <- data.frame("API_Number"=row$API_Number,"val"=st_area(intersects)[1])
outdf <- rbind(outdf,new)
}
print(Sys.time())
plot <- ggplot()+
geom_sf(data = intersects)+
geom_sf(data = row)
plot
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
setwd("~/Downloads/Tab_Intersect")
table <- read.csv("Oklahoma/OK_shale.csv", nrows = 9)
#First, lets import the well pad and the block data and then project them to
#a projection that's good for our working area.
pads <- st_as_sf(table, coords = c('Longitude','Latitude'), crs = 4269)
blocks <- st_read("Oklahoma/OK_blocks.shp")
#Project data
pads <- st_transform(pads,3158)
blocks <- st_transform(blocks, 3158)
#Add some data to the Census Blocks
#blocks$
#Create buffers around the well pads of 1,000 km
#buf <- st_buffer(pads, 1000)
outdf <- data.frame()
print(Sys.time())
for (r in 1:nrow(pads)){
row <- pads[r,]
buffer <- st_buffer(row, 10000)
intersects <- st_intersection(blocks,buffer)
intersects$NewArea <- st_area(intersects)
new <- data.frame("API_Number"=row$API_Number,"val"=st_area(intersects)[1])
outdf <- rbind(outdf,new)
}
print(Sys.time())
plot <- ggplot()+
geom_sf(data = intersects)+
geom_sf(data = row)
plot
library(sf)
library(ggplot2)
#The goal here is to iterate through the well pads and determine
#the areas of blocks that are at risk of contamination and to weight
#estimated well use into those areas so we can come up with a total
#number of wells at risk from each well pad
setwd("~/Downloads/Tab_Intersect")
table <- read.csv("Oklahoma/OK_shale.csv", nrows = 9)
#First, lets import the well pad and the block data and then project them to
#a projection that's good for our working area.
pads <- st_as_sf(table, coords = c('Longitude','Latitude'), crs = 4269)
blocks <- st_read("Oklahoma/OK_blocks.shp")
#Project data
pads <- st_transform(pads,3158)
blocks <- st_transform(blocks, 3158)
#Add some data to the Census Blocks
#blocks$
#Create buffers around the well pads of 1,000 km
#buf <- st_buffer(pads, 1000)
outdf <- data.frame()
print(Sys.time())
for (r in 1:nrow(pads)){
row <- pads[r,]
buffer <- st_buffer(row, 10000)
intersects <- st_intersection(blocks,buffer)
intersects$NewArea <- st_area(intersects)
new <- data.frame("API_Number"=row$API_Number,"val"=st_area(intersects)[1])
outdf <- rbind(outdf,new)
}
print(Sys.time())
plot <- ggplot()+
geom_sf(data = intersects)+
geom_sf(data = row)
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row)
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4, colours('green')))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4, colours('green')))
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4, colour ='green'))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4, colour ='green'))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(colour = 'red'))+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, aes(color = 'red'))+
geom_sf(data = row, aes(size = 4))
plot
install.packages('pacman')
library(pacman)
plot <- ggplot()+
geom_sf(data = intersects, colour = 'red')+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, colour = 'red')+
geom_sf(data = row, aes(size = 4))
plot
plot <- ggplot()+
geom_sf(data = intersects, colour = 'red')+
geom_sf(data = row, colour = 'green', size = 4)
plot
plot <- ggplot()+
geom_sf(data = intersects, colour = 'red')+
geom_sf(data = row, colour = 'green', size = 4, outline = TRUE)
plot <- ggplot()+
geom_sf(data = intersects, colour = 'red')+
geom_sf(data = row, colour = 'black', size = 4)
plot
View(outdf)
